<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TCODM | Torneo Elite</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <style>
        :root { --y: #f3ca33; --bg: #050505; --card: #111; }
        
        body { 
            background-color: var(--bg); color: white; margin: 0; 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            display: flex; flex-direction: column; align-items: center;
            padding: 40px 15px; overflow-x: hidden;
        }

        /* Efecto de fondo sutil */
        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 20%, #1a1a00 0%, transparent 50%);
            z-index: -1;
        }

        .container { 
            width: 100%; max-width: 450px; background: var(--card); padding: 30px; 
            border-top: 4px solid var(--y); border-radius: 8px; box-sizing: border-box;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5); margin-bottom: 40px;
        }

        h1 { font-size: 40px; text-align: center; margin: 0; color: white; letter-spacing: -2px; }
        .yellow-text { color: var(--y); }
        .web-tag { text-align: center; display: block; color: #555; margin-bottom: 30px; font-weight: bold; font-size: 12px; letter-spacing: 3px; }

        /* Contador de Cupos Pro */
        .counter-box {
            display: flex; justify-content: space-between; align-items: center;
            background: #1a1a1a; padding: 15px; border-radius: 5px; margin-bottom: 25px;
            border: 1px solid #222;
        }
        .counter-label { font-size: 12px; color: #888; text-transform: uppercase; }
        .counter-num { font-size: 20px; font-weight: 900; color: var(--y); }

        .section-title { color: var(--y); font-size: 10px; font-weight: bold; margin-bottom: 8px; text-transform: uppercase; opacity: 0.6; }
        
        input { 
            width: 100%; padding: 15px; background: #0a0a0a; border: 1px solid #333; 
            color: white; margin-bottom: 15px; box-sizing: border-box; border-radius: 5px;
            transition: 0.3s; font-size: 16px;
        }
        input:focus { border-color: var(--y); outline: none; background: #111; box-shadow: 0 0 10px rgba(243, 202, 51, 0.1); }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

        .btn-pay { 
            width: 100%; padding: 22px; background: var(--y); color: black; 
            border: none; font-weight: 900; font-size: 18px; cursor: pointer; 
            text-transform: uppercase; border-radius: 5px; transition: 0.3s;
            box-shadow: 0 10px 20px rgba(243, 202, 51, 0.2);
        }
        .btn-pay:hover { transform: translateY(-2px); box-shadow: 0 15px 25px rgba(243, 202, 51, 0.3); }
        .btn-pay:active { transform: translateY(0); }
        .btn-pay:disabled { background: #222; color: #555; cursor: not-allowed; transform: none; box-shadow: none; }

        /* Lista de Jugadores Mejorada */
        .list-container { width: 100%; max-width: 450px; }
        .squad-card { 
            background: linear-gradient(90deg, #111 0%, #0a0a0a 100%); 
            border-left: 3px solid var(--y); padding: 18px; margin-bottom: 12px; 
            border-radius: 4px; animation: slideIn 0.5s ease;
        }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }

        .squad-card h3 { margin: 0; font-size: 16px; text-transform: uppercase; color: #fff; }
        .squad-card p { margin: 8px 0 0; color: #666; font-size: 12px; font-family: monospace; }
        
        .waiting-list { opacity: 0.6; filter: grayscale(1); }
        .waiting-list h3::after { content: " (EN ESPERA)"; font-size: 10px; color: #ff5555; margin-left: 10px; }

        .footer-img { 
            width: 100%; max-width: 900px; height: auto; 
            border-radius: 10px; margin-top: 60px; filter: grayscale(0.5) brightness(0.7);
            transition: 0.5s;
        }
        .footer-img:hover { filter: grayscale(0) brightness(1); }
    </style>
</head>
<body>

    <div class="container">
        <h1>TC<span class="yellow-text">ODM</span></h1>
        <span class="web-tag">DOMINA EL CAMPO</span>

        <div class="counter-box">
            <div>
                <div class="counter-label">Estado de Cupos</div>
                <div id="cuposTxt" class="counter-num">-- / 16</div>
            </div>
            <div id="statusDot" style="width: 12px; height: 12px; border-radius: 50%; background: #555;"></div>
        </div>

        <div class="section-title">Identificación del Equipo</div>
        <input type="text" id="squadName" placeholder="NOMBRE DE LA SQUAD" oninput="validar()">

        <div class="section-title">Operadores (ID Exacto)</div>
        <div class="grid">
            <input type="text" id="p1" placeholder="ID Jugador 1" oninput="validar()">
            <input type="text" id="p2" placeholder="ID Jugador 2" oninput="validar()">
            <input type="text" id="p3" placeholder="ID Jugador 3" oninput="validar()">
            <input type="text" id="p4" placeholder="ID Jugador 4" oninput="validar()">
        </div>

        <button id="btnStripe" class="btn-pay" disabled onclick="registrar()">INSCRIBIR SQUAD ($5.46)</button>
        <p style="font-size: 10px; color: #444; text-align: center; margin-top: 15px;">
            Al registrarte aceptas las reglas del torneo. <br> Procesado de forma segura por Stripe.
        </p>
    </div>

    <div class="list-container">
        <div class="section-title" style="text-align: center; margin-bottom: 20px;">SQUADS CONFIRMADAS</div>
        <div id="listaSquads"></div>
        <div id="listaEspera" style="margin-top: 30px;">
            <div class="section-title" style="text-align: center;">LISTA DE RESERVA</div>
        </div>
    </div>

    <img src="https://www.callofduty.com/content/dam/atvi/callofduty/cod-touchui/mobile/home/hero/CODM_Home_Hero-BG_Desktop-LG-11.webp" class="footer-img">

    <script>
        // CONFIGURACIÓN FIREBASE (Usa tus datos aquí)
        const firebaseConfig = {
            databaseURL: "https://tcodm-e4147-default-rtdb.firebaseio.com/",
            projectId: "tcodm-e4147",
            // Agrega apiKey y appId aquí para conectar
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const MAX_TITULARES = 16; // Número de equipos que entran al torneo principal

        database.ref('inscritos').on('value', (snapshot) => {
            const titularesDiv = document.getElementById('listaSquads');
            const esperaDiv = document.getElementById('listaEspera');
            titularesDiv.innerHTML = "";
            esperaDiv.innerHTML = `<div class="section-title" style="text-align: center;">LISTA DE RESERVA</div>`;
            
            let count = 0;
            snapshot.forEach((child) => {
                const s = child.val();
                count++;
                const card = document.createElement('div');
                card.className = count > MAX_TITULARES ? 'squad-card waiting-list' : 'squad-card';
                card.innerHTML = `<h3>${s.nombre}</h3><p>${s.jugadores.join(' • ')}</p>`;
                
                if(count <= MAX_TITULARES) titularesDiv.appendChild(card);
                else esperaDiv.appendChild(card);
            });

            document.getElementById('cuposTxt').innerText = `${count} / ${MAX_TITULARES}`;
            document.getElementById('statusDot').style.background = count >= MAX_TITULARES ? "#ff5555" : "#00ff88";
        });

        function validar() {
            const inputs = [
                document.getElementById('squadName').value,
                document.getElementById('p1').value,
                document.getElementById('p2').value,
                document.getElementById('p3').value,
                document.getElementById('p4').value
            ];
            document.getElementById('btnStripe').disabled = !inputs.every(i => i.trim().length > 2);
        }

        function registrar() {
            const data = {
                nombre: document.getElementById('squadName').value.toUpperCase(),
                jugadores: [
                    document.getElementById('p1').value,
                    document.getElementById('p2').value,
                    document.getElementById('p3').value,
                    document.getElementById('p4').value
                ],
                timestamp: Date.now()
            };

            database.ref('inscritos').push(data).then(() => {
                window.location.href = "https://buy.stripe.com/4gM8wHey05kI44CfbN4ow00";
            });
        }
    </script>
    <style>
    /* Estilos CSS para la nueva sección */
    .download-section-tcodm {
        background-color: #000; /* Fondo negro como en el ejemplo */
        padding: 20px 0;
        text-align: center;
        margin-top: 50px; /* Espacio arriba para que no pegue con lo de antes */
    }

    .download-section-tcodm .banner-image-container {
        max-width: 1000px; /* Ancho máximo similar al banner original */
        margin: 0 auto; /* Centrar el banner */
        background-color: #000; /* Asegura el fondo negro alrededor del banner */
        padding-bottom: 20px; /* Pequeño padding debajo del banner */
    }

    .download-section-tcodm .banner-image-container img {
        max-width: 100%; /* La imagen se ajusta al contenedor */
        height: auto;
        display: block; /* Elimina espacio extra debajo de la imagen */
    }

    .tcodm-text {
        color: #FFDA24; /* Color amarillo similar al del banner */
        font-family: 'Arial Black', sans-serif; /* Fuente impactante */
        font-size: 2.5em; /* Tamaño grande para el texto */
        font-weight: bold;
        margin-top: 20px; /* Espacio entre el banner y el texto */
        text-transform: uppercase; /* Todo en mayúsculas */
        letter-spacing: 2px; /* Espaciado entre letras */
    }

    /* Media Queries para ajustar en móviles si es necesario */
    @media (max-width: 768px) {
        .tcodm-text {
            font-size: 1.8em; /* Tamaño más pequeño en móviles */
        }
    }
</style>

<section class="download-section-tcodm">
    <div class="banner-image-container">
        <img src="https://www.callofduty.com/content/dam/atvi/callofduty/cod-touchui/mobile/home/downloadbanner/CODM_Download-Now_Banner_LG.webp" alt="Call of Duty Mobile Descargar Ahora">
    </div>
    <div class="tcodm-text">
        Tcodm
    </div>
</section>
</body>
</html>
