<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCODM | Pro League</title>
    <link rel="icon" type="image/png" href="iconoweb.png">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <style>
        :root { 
            --y: #F4CB33; --bg: #050505; --green: #4CAF50; 
            --p1: #F4CB33; --p2: #00E5FF; --p3: #FF3D00; --p4: #9C27B0;
        }
        
        body { background: var(--bg); color: white; font-family: 'Arial', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; }

        nav { width: 100%; background: rgba(0,0,0,0.9); padding: 15px 0; display: flex; justify-content: space-around; border-bottom: 2px solid var(--y); position: fixed; top: 0; z-index: 1000; }

        .content { width: 95%; max-width: 800px; padding: 80px 0; }

        /* IM츼GENES CON RECORTE PARA OCULTAR TEXTO BAJO */
        .img-container { 
            width: 100%; 
            height: 250px; 
            overflow: hidden; 
            border: 1px solid #333; 
            margin: 20px 0;
            border-radius: 8px;
        }
        .img-container img { 
            width: 100%; 
            height: auto; 
            margin-top: -20px; /* Sube la imagen para ocultar lo de abajo */
        }

        /* TIP BOX */
        .tip-box { background: #111; border-left: 4px solid var(--y); padding: 15px; margin-bottom: 30px; font-style: italic; font-size: 14px; color: #ccc; }

        /* TABLA PREMIOS */
        .prize-card { background: #0a0a0a; padding: 20px; border: 1px solid #222; margin-bottom: 40px; text-align: center; }
        .puntos-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .puntos-table th { background: var(--y); color: black; padding: 10px; font-size: 13px; }
        .puntos-table td { padding: 12px; border: 1px solid #222; font-size: 16px; }
        .val-verde { color: var(--green); font-weight: bold; }

        /* LISTA SQUADS PEQUE칌A */
        .squad-container { background: #0d0d0d; border: 1px solid #222; padding: 12px; margin-bottom: 20px; }
        .squad-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .squad-name { font-size: 16px; font-weight: bold; color: var(--y); }

        .player-row { display: flex; align-items: center; background: #000; margin-bottom: 4px; border: 1px solid #1a1a1a; height: 35px; }
        .num-box { width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 16px; color: black; font-weight: bold; }
        .player-name { padding-left: 12px; font-size: 14px; text-transform: uppercase; font-weight: bold; }

        .nb1 { background: var(--p1); } .nb2 { background: var(--p2); } .nb3 { background: var(--p3); } .nb4 { background: var(--p4); }

        .st-tag { font-size: 10px; padding: 2px 8px; border-radius: 10px; text-transform: uppercase; }
        .st-pend { background: #420; color: #f90; }
        .st-conf { background: #030; color: #4f4; }

        .btn-pay { background: var(--y); color: black; padding: 15px; border: none; font-weight: bold; cursor: pointer; width: 100%; text-decoration: none; display: block; text-align: center; margin-top: 20px; }
        
        .legal { padding: 30px; font-size: 10px; color: #444; text-align: justify; line-height: 1.5; }
    </style>
</head>
<body>

    <nav>
        <div style="font-weight:900;">T<span style="color:var(--y)">CODM</span></div>
        <div id="count-nav" style="color:var(--y);">0/25 SQUADS</div>
    </nav>

    <main class="content">
        
        <div class="img-container">
            <img src="https://imgs.callofduty.com/content/dam/atvi/callofduty/cod-touchui/blog/body/codm/2025/season-3-cyber-mirage/CODM-S3-CM-ANNOUNCEMENT-006.jpg" alt="CODM S3">
        </div>
        <div class="tip-box">
            <strong>游댠 TIP PRO #1:</strong> La comunicaci칩n es clave. No se separen m치s de 50 metros. Una Squad unida siempre vence a jugadores solitarios por m치s "pro" que sean.
        </div>

        <div class="prize-card">
            <h3 style="margin:0;">PREMIOS POR JUGADOR</h3>
            <table class="puntos-table">
                <tr><th>PUESTO</th><th>SQUAD</th><th>CADA UNO</th></tr>
                <tr><td>游볞 1er Lugar</td><td>$60.00</td><td class="val-verde">$15.00</td></tr>
                <tr><td>游볟 2do Lugar</td><td>$28.00</td><td class="val-verde">$7.00</td></tr>
                <tr><td>游볠 3er Lugar</td><td>$12.00</td><td class="val-verde">$3.00</td></tr>
            </table>
            <a href="https://buy.stripe.com/4gM8wHey05kI44CfbN4ow00" class="btn-pay" id="btn-pago">PAGAR INSCRIPCI칍N ($5.46)</a>
        </div>

        <div class="img-container">
            <img src="https://imgs.callofduty.com/content/dam/atvi/callofduty/cod-touchui/blog/body/codm/2025/CODM-S2-DIGITAL-DAWN-005.jpg" alt="CODM S2">
        </div>
        <div class="tip-box">
            <strong>游꿢 TIP PRO #2:</strong> En este torneo valen las KILLS. No campeen el final; busquen rotaciones agresivas en veh칤culos para encontrar equipos desprevenidos.
        </div>

        <h3 style="text-align:center; color:var(--y);">SQUADS REGISTRADAS</h3>
        <div id="lista-squads"></div>

        <div class="legal">
            <strong>AVISO LEGAL:</strong> Call of Duty춽 y Call of Duty: Mobile춽 son marcas de Activision Publishing, Inc. TCODM es una organizaci칩n independiente. Este sitio es para entretenimiento y ayuda a clanes. Sin relaci칩n comercial con Activision. 
            <p style="text-align:center;">춸 2025 TCODM LEAGUE</p>
        </div>
    </main>

    <script>
        const firebaseConfig = { databaseURL: "https://tcodm-e4147-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            if (params.get('status') === 'success') {
                document.body.innerHTML = "<h1>PAGO EXITOSO. REGISTRANDO...</h1>"; // Simplificado para el ejemplo
                // Aqu칤 podr칤as redirigir a un formulario peque침o
            }
            cargarDatos();
        };

        function cargarDatos() {
            database.ref('inscripciones').on('value', (snapshot) => {
                const list = document.getElementById('lista-squads');
                list.innerHTML = "";
                let conf = 0;
                snapshot.forEach((child) => {
                    const d = child.val();
                    if(d.estado === "CONFIRMADO") conf++;
                    list.innerHTML += `
                        <div class="squad-container">
                            <div class="squad-header">
                                <span class="squad-name">${child.key}</span>
                                <span class="st-tag ${d.estado === 'CONFIRMADO' ? 'st-conf' : 'st-pend'}">${d.estado}</span>
                            </div>
                            <div class="player-row"><div class="num-box nb1">1</div><div class="player-name">${d.p1}</div></div>
                            <div class="player-row"><div class="num-box nb2">2</div><div class="player-name">${d.p2}</div></div>
                            <div class="player-row"><div class="num-box nb3">3</div><div class="player-name">${d.p3}</div></div>
                            <div class="player-row"><div class="num-box nb4">4</div><div class="player-name">${d.p4}</div></div>
                        </div>`;
                });
                document.getElementById('count-nav').innerText = `${conf}/25 SQUADS`;
            });
        }
    </script>
</body>
</html>
